<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="utf-8">
        <title>Aprenda WA</title>
    </head>
    <body>
        <h1>Aprendendo WebAssembly</h1>
        <script>
            // Objeto que indica funções em JavaScript
            // chamadas por código em C.
            const imports = {
                env : {
                    numLog: console.log,
                    strLog: console.log,
                }
            };

            // Compila e inicia o módulo WebAssembly
            WebAssembly.instantiateStreaming(fetch('/program.wasm'), imports)
            .then(wasm => {
                console.log('WASM pronto...');
                window.wasm = wasm;
                wasm.instance.exports.concatena("linha 1", "linha 2");
            });
        </script>
    </body>
</html>